<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Space Tower v9c</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box}
  body{overflow:hidden;background:#0a0e27;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;touch-action:none}
  #gameCanvas{display:block}
  #build-panel{position:fixed;bottom:0;left:0;right:0;height:34vh;min-height:190px;background:linear-gradient(to bottom,#0f1419,#0a0e1a);border-top:2px solid #1a2030;display:flex;z-index:20;color:#fff;font-family:'Courier New',monospace}
  #bp-res{width:160px;padding:8px;border-right:1px solid #1a2030;overflow-y:auto;display:flex;flex-direction:column;gap:5px}
  .rb{background:#1a1f3a;padding:6px 8px;border-radius:4px;border:2px solid #2a3050}
  .rb .l{font-size:7px;opacity:0.5;letter-spacing:1px}.rb .v{font-size:15px;font-weight:bold;margin-top:1px}.rb .rate{font-size:8px;opacity:0.4;margin-top:1px}
  .sat-wrap{background:#0a0e27;border-radius:6px;height:10px;overflow:hidden;position:relative}
  .sat-fill{height:100%;transition:width 0.3s;border-radius:6px}
  .sat-txt{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:7px;font-weight:bold}
  #bp-floor{width:380px;padding:8px;border-right:1px solid #1a2030;overflow-y:auto}
  #bp-fhdr{display:flex;align-items:center;gap:6px;margin-bottom:6px}
  #bp-fhdr .nav{background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.2);color:#fff;padding:3px 8px;border-radius:4px;cursor:pointer;font-size:13px;font-family:monospace}
  #bp-fhdr .nav.dis{opacity:0.2;cursor:default}
  #bp-ftitle{flex:1;font-size:12px;font-weight:bold;text-align:center}
  #bp-slots{display:grid;grid-template-columns:repeat(6,1fr);gap:3px;margin-bottom:6px}
  .slot{background:rgba(255,255,255,0.04);border:1px dashed rgba(255,255,255,0.15);border-radius:3px;padding:3px;text-align:center;min-height:38px;cursor:pointer;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:9px;transition:all 0.15s}
  .slot:hover{background:rgba(255,255,255,0.08)}.slot.filled{border-style:solid}.slot.placeable{border:1px dashed #00ff88;background:rgba(0,255,136,0.06)}
  .slot .si{font-size:14px}.slot .sn{font-size:6px;opacity:0.5}.slot .ss{font-size:6px;opacity:0.3;cursor:pointer;padding:1px 3px;border-radius:2px}.slot .ss:hover{opacity:0.8;color:#ff6b35}
  #bp-mods{flex:1;padding:8px;overflow-y:auto}
  #bp-mods-title{font-size:10px;opacity:0.4;margin-bottom:5px;letter-spacing:1px}
  .mc{background:#1a1f3a;border:2px solid #2a3050;border-radius:4px;padding:6px;margin-bottom:4px;cursor:pointer;transition:all 0.15s}
  .mc:hover{border-color:#4a5070}.mc.sel{border-color:#00ff88;background:rgba(0,255,136,0.08)}.mc.dis{opacity:0.3;cursor:not-allowed}
  .mc .mt{display:flex;align-items:center;gap:5px;margin-bottom:2px}.mc .mi{font-size:16px}.mc .mn{font-size:10px;font-weight:bold}.mc .md{font-size:7px;opacity:0.4}.mc .mp{font-size:8px;margin-top:2px}
  .unlock-box{padding:8px;border-radius:4px;font-size:9px;margin-top:5px}
  .unlock-box.locked{background:rgba(255,100,50,0.08);border:2px solid rgba(255,100,50,0.3)}
  .unlock-box.ready{background:rgba(0,255,136,0.08);border:2px solid rgba(0,255,136,0.4);cursor:pointer}
  #hud-top{position:fixed;top:8px;left:8px;z-index:15;display:flex;gap:6px}
  .hp{background:rgba(0,0,0,0.4);color:rgba(255,255,255,0.8);padding:4px 11px;border-radius:12px;font-size:10px;letter-spacing:1px;backdrop-filter:blur(4px);border:1px solid rgba(255,255,255,0.1);font-family:monospace}
  #msg{position:fixed;top:45%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,0.88);color:white;padding:12px 20px;border-radius:8px;border:1px solid rgba(255,255,255,0.25);font-size:14px;text-align:center;max-width:400px;opacity:0;transition:opacity 0.3s;z-index:25;line-height:1.4;pointer-events:none}
  #msg .ml{font-size:8px;text-transform:uppercase;letter-spacing:2px;color:rgba(255,255,255,0.35);margin-bottom:3px}
  .float-txt{position:fixed;pointer-events:none;z-index:30;font-family:monospace;font-weight:bold;font-size:13px;transition:all 1.5s;opacity:0}
  #zoom-wrap{position:fixed;bottom:calc(34vh + 12px);left:14px;z-index:25;display:flex;flex-direction:column;align-items:center;gap:3px}
  #zoom-lbl{color:rgba(255,255,255,0.5);font-size:8px;letter-spacing:1px;background:rgba(0,0,0,0.35);padding:2px 7px;border-radius:6px;font-family:monospace}
  #zoom-sl{-webkit-appearance:none;appearance:none;width:90px;height:4px;background:rgba(255,255,255,0.12);border-radius:2px;outline:none;cursor:pointer}
  #zoom-sl::-webkit-slider-thumb{-webkit-appearance:none;width:14px;height:14px;background:rgba(255,255,255,0.75);border-radius:50%;cursor:pointer}
  #snd-btn{position:fixed;bottom:calc(34vh + 12px);right:14px;z-index:25;background:rgba(0,0,0,0.35);color:rgba(255,255,255,0.6);border:1px solid rgba(255,255,255,0.15);padding:4px 8px;border-radius:6px;font-size:14px;cursor:pointer;font-family:monospace;backdrop-filter:blur(4px);transition:opacity 0.2s}
  #snd-btn:hover{opacity:0.9;color:rgba(255,255,255,0.9)}
  #elev-panel{position:fixed;top:50%;left:calc(50% + 160px);transform:translate(0,-50%);background:rgba(10,14,30,0.95);border:2px solid rgba(255,255,255,0.15);border-radius:8px;padding:16px;z-index:30;color:#fff;font-family:'Courier New',monospace;min-width:200px;display:none;backdrop-filter:blur(8px)}
  #elev-panel.open{display:block}
  .elev-title{font-size:10px;letter-spacing:3px;opacity:0.4;text-align:center;margin-bottom:10px}
  .elev-floor{padding:8px 12px;margin:3px 0;border-radius:4px;cursor:pointer;font-size:12px;display:flex;justify-content:space-between;align-items:center;transition:background 0.1s}
  .elev-floor:hover{background:rgba(255,255,255,0.08)}
  .elev-floor.current{border:1px solid rgba(255,215,0,0.3);background:rgba(255,215,0,0.06);cursor:default}
  .elev-floor.locked{opacity:0.2;cursor:not-allowed}
  .elev-floor.selected{background:rgba(255,255,255,0.1);border-left:3px solid rgba(255,215,0,0.6)}
  .elev-floor .ef-num{opacity:0.4;font-size:10px}
  .elev-hint{font-size:8px;opacity:0.25;text-align:center;margin-top:8px;letter-spacing:1px}
  #instr{position:fixed;top:8px;right:8px;color:rgba(255,255,255,0.55);background:rgba(0,0,0,0.3);padding:6px 10px;border-radius:5px;font-size:9px;line-height:1.5;backdrop-filter:blur(4px);z-index:15;font-family:monospace}
  #touch-ctrls{display:none;position:fixed;z-index:22;pointer-events:none}
  .tb{pointer-events:auto;position:absolute;width:54px;height:54px;border-radius:50%;background:rgba(255,255,255,0.1);border:2px solid rgba(255,255,255,0.22);display:flex;align-items:center;justify-content:center;font-size:20px;color:rgba(255,255,255,0.65);user-select:none;-webkit-user-select:none;backdrop-filter:blur(4px);transition:background 0.1s}
  .tb.on{background:rgba(255,255,255,0.3);border-color:rgba(255,255,255,0.5)}
  .tb.sm{width:44px;height:44px;font-size:14px;border-radius:12px}
  #tl{left:14px;bottom:calc(34vh + 75px)}#tr{left:82px;bottom:calc(34vh + 75px)}#tu{left:48px;bottom:calc(34vh + 135px)}#td{left:48px;bottom:calc(34vh + 15px)}#te{right:18px;bottom:calc(34vh + 95px)}#tf{right:74px;bottom:calc(34vh + 45px)}
  #bp-tabs{display:none}#bp-mini{display:none}
  @media(pointer:coarse),(max-width:768px){
    #touch-ctrls{display:block;inset:0}#instr{display:none}
    #zoom-wrap{bottom:calc(42vh + 12px);left:50%;transform:translateX(-50%)}
    #build-panel{flex-direction:column;height:42vh;min-height:230px}
    #bp-res,#bp-floor,#bp-mods{display:none !important}
    #bp-tabs{display:flex;gap:0;border-bottom:1px solid #1a2030;background:#0a0e1a;flex-shrink:0}
    .bpt{flex:1;padding:7px 4px;text-align:center;font-size:9px;font-family:monospace;color:rgba(255,255,255,0.35);cursor:pointer;border-bottom:2px solid transparent}
    .bpt.on{color:#ffd700;border-bottom-color:#ffd700;background:rgba(255,255,255,0.03)}
    #bp-mini{display:flex !important;gap:8px;padding:5px 10px;background:#0a0e1a;border-bottom:1px solid #1a2030;font-size:10px;font-family:monospace;flex-shrink:0;justify-content:space-around;color:rgba(255,255,255,0.6)}
    #bp-mob{flex:1;overflow-y:auto;padding:8px}
    #tl{bottom:calc(42vh + 75px)}#tr{bottom:calc(42vh + 75px)}#tu{bottom:calc(42vh + 135px)}#td{bottom:calc(42vh + 15px)}#te{bottom:calc(42vh + 95px)}#tf{bottom:calc(42vh + 45px)}
    #snd-btn{bottom:calc(42vh + 12px)}
  }
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<div id="hud-top"><div class="hp" id="fp">FLOOR 1 ¬∑ LOBBY</div><div class="hp" id="sp" style="display:none;background:rgba(255,180,50,0.6);color:#2a2010">üßë SUIT ‚Äî F</div></div>
<div id="instr">WASD / Arrows ‚Äî move, climb<br>Hold ‚Üë ‚Äî charge jump (1-3 floors)<br>Hold ‚Üì ‚Äî charge drop (1-4 floors)<br>E ‚Äî interact ¬∑ F ‚Äî suit</div>
<div id="zoom-wrap"><div id="zoom-lbl">70%</div><input type="range" id="zoom-sl" min="0.25" max="1.0" step="0.01" value="0.7"></div>
<button id="snd-btn">üîä</button>
<div id="msg"><div class="ml"></div><div class="mt2"></div></div>
<div id="elev-panel"><div class="elev-title">ELEVATOR</div><div id="elev-floors"></div><div class="elev-hint">ESC TO CLOSE</div></div>
<div id="touch-ctrls"><div class="tb" id="tl">‚óÄ</div><div class="tb" id="tr">‚ñ∂</div><div class="tb" id="tu">‚ñ≤</div><div class="tb" id="td">‚ñº</div><div class="tb sm" id="te">E</div><div class="tb sm" id="tf">F</div></div>
<div id="build-panel">
  <div id="bp-tabs"><div class="bpt on" data-t="res">‚ö° Resources</div><div class="bpt" data-t="floor">üèóÔ∏è Floor</div><div class="bpt" data-t="mods">üì¶ Build</div></div>
  <div id="bp-mini"><span id="rm-e">‚ö°0</span><span id="rm-c">üí∞100</span><span id="rm-p">üë•0</span><span id="rm-s">üòä50%</span></div>
  <div id="bp-mob"></div>
  <div id="bp-res"><div style="font-size:8px;opacity:0.4;letter-spacing:2px;margin-bottom:2px">RESOURCES</div>
    <div class="rb" style="border-color:#ff6b35"><div class="l">‚ö° ENERGY (net)</div><div class="v" id="re" style="color:#ff6b35">0</div><div class="rate" id="re-rate"></div></div>
    <div class="rb" style="border-color:#ffd700"><div class="l">üí∞ CREDITS</div><div class="v" id="rc" style="color:#ffd700">100</div><div class="rate" id="rc-rate"></div></div>
    <div class="rb" style="border-color:#4a9eff"><div class="l">üë• POPULATION</div><div class="v" id="rp" style="color:#4a9eff">0</div></div>
    <div class="rb" style="border-color:#00ff88"><div class="l">üòä MORALE</div><div class="sat-wrap"><div class="sat-fill" id="sf" style="width:50%;background:#ffd700"></div><div class="sat-txt" id="st">50%</div></div></div>
  </div>
  <div id="bp-floor"><div id="bp-fhdr"><div class="nav" id="fn-prev">‚óÄ</div><div id="bp-ftitle">FLOOR 1 ¬∑ LOBBY</div><div class="nav" id="fn-next">‚ñ∂</div></div><div id="bp-slots"></div><div id="bp-lock-area"></div></div>
  <div id="bp-mods"><div id="bp-mods-title">AVAILABLE MODULES</div><div id="bp-mods-list"></div></div>
</div>
<script type="module" src="/src/main.js"></script>
</body>
</html>
